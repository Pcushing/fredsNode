#!/usr/bin/env node

require('dotenv').config(); // Load our sensitive data

var postMessageToSlack = function(message) {
  var IncomingWebhook = require('@slack/client').IncomingWebhook; // Slack library load
  var slackUrl = process.env.SLACK_WEBHOOK_URL || ''; // Store sensitive data in .env file that's not a part of the repository
  var slackWebhook = new IncomingWebhook(slackUrl); // Create the webhook we're going to send to
  slackWebhook.send(message, function(err, res) {
    if (err) {
      console.log('Error:', err);
    } else {
      console.log('Message sent: ', res);
    }
  });
}

module.exports = postMessageToSlack